{"ast":null,"code":"var _jsxFileName = \"/Users/rodolfoferraz/Desktop/meu-treino-app/frontend/src/TreinoVisual.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport './TreinoVisual.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LOGO_FILENAME = 'Rodolfo_Logo.png';\nconst TreinoVisual = ({\n  lista,\n  alunoNome,\n  observacoes,\n  onClose,\n  isModoVisualizacao\n}) => {\n  _s();\n  const treinoRef = useRef();\n  const [textoBotao, setTextoBotao] = useState('Gerar Link Curto');\n  const handleSaveAndLink = async () => {\n    setTextoBotao('Gerando...');\n    const dadosDoTreino = {\n      lista,\n      alunoNome,\n      observacoes\n    };\n    try {\n      // Passo 1: Enviar os dados para o \"cofre\" na nuvem\n      const response = await fetch('/api/salvarTreino', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(dadosDoTreino)\n      });\n      if (!response.ok) throw new Error('Falha ao salvar o treino.');\n      const {\n        id\n      } = await response.json();\n      const linkFinal = `${window.location.origin}/treino/${id}`;\n      const mensagemParaCopiar = `Olá, ${alunoNome || 'aluno(a)'}! Segue o seu treino personalizado. Clique para visualizar:\\n\\n${linkFinal}`;\n\n      // Passo 2: Copiar a mensagem com o link curto\n      navigator.clipboard.writeText(mensagemParaCopiar).then(() => {\n        setTextoBotao('✅ Link Copiado!');\n        setTimeout(() => setTextoBotao('Gerar Link Curto'), 2500);\n      });\n    } catch (error) {\n      console.error(\"Erro ao salvar o treino:\", error);\n      alert(\"Ocorreu um erro ao gerar o link. Este recurso só funciona com o site publicado.\");\n      setTextoBotao('Gerar Link Curto');\n    }\n  };\n  const conteudoTreino = /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: treinoRef,\n    className: \"container-treino\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"cabecalho-treino-novo\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cabecalho-texto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Rodolfo Ferraz\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"subtitulo-personal\",\n          children: \"Personal Trainer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"nome-aluno\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Aluno(a):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 47\n          }, this), \" \", alunoNome || '____________________']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cabecalho-logo\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `/${LOGO_FILENAME}`,\n          alt: \"Logo Personal Trainer\",\n          className: \"logo-img\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"grid-exercicios\",\n      children: (lista || []).map((ex, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-exercicio\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"numero-exercicio\",\n          children: index + 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `/gifs/${ex.gif}`,\n          alt: ex.nome,\n          className: \"gif-exercicio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"nome-exercicio\",\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: ex.nome\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 55\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"serie-exercicio\",\n          children: \"3x10 rep\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 25\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"rodape-treino-novo\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Observa\\xE7\\xF5es:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"observacoes-texto\",\n        children: observacoes || 'Nenhuma.'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n\n  // Se for modo de visualização, mostra apenas o treino\n  if (isModoVisualizacao) {\n    return conteudoTreino;\n  }\n\n  // Se for modo de criação, mostra o modal completo\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Pr\\xE9-visualiza\\xE7\\xE3o e Compartilhamento\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        className: \"close-button\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-actions\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSaveAndLink,\n        className: \"export-button\",\n        children: textoBotao\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), conteudoTreino]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n};\n_s(TreinoVisual, \"CeO2ZTx/1AwO9mcC+0ueaviR21I=\");\n_c = TreinoVisual;\nexport default TreinoVisual;\nvar _c;\n$RefreshReg$(_c, \"TreinoVisual\");","map":{"version":3,"names":["React","useRef","useState","jsxDEV","_jsxDEV","LOGO_FILENAME","TreinoVisual","lista","alunoNome","observacoes","onClose","isModoVisualizacao","_s","treinoRef","textoBotao","setTextoBotao","handleSaveAndLink","dadosDoTreino","response","fetch","method","headers","body","JSON","stringify","ok","Error","id","json","linkFinal","window","location","origin","mensagemParaCopiar","navigator","clipboard","writeText","then","setTimeout","error","console","alert","conteudoTreino","ref","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","map","ex","index","gif","nome","onClick","_c","$RefreshReg$"],"sources":["/Users/rodolfoferraz/Desktop/meu-treino-app/frontend/src/TreinoVisual.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport './TreinoVisual.css';\n\nconst LOGO_FILENAME = 'Rodolfo_Logo.png'; \n\nconst TreinoVisual = ({ lista, alunoNome, observacoes, onClose, isModoVisualizacao }) => {\n    const treinoRef = useRef();\n    const [textoBotao, setTextoBotao] = useState('Gerar Link Curto');\n\n    const handleSaveAndLink = async () => {\n        setTextoBotao('Gerando...');\n        const dadosDoTreino = { lista, alunoNome, observacoes };\n        \n        try {\n            // Passo 1: Enviar os dados para o \"cofre\" na nuvem\n            const response = await fetch('/api/salvarTreino', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(dadosDoTreino),\n            });\n\n            if (!response.ok) throw new Error('Falha ao salvar o treino.');\n\n            const { id } = await response.json();\n            const linkFinal = `${window.location.origin}/treino/${id}`;\n            const mensagemParaCopiar = `Olá, ${alunoNome || 'aluno(a)'}! Segue o seu treino personalizado. Clique para visualizar:\\n\\n${linkFinal}`;\n            \n            // Passo 2: Copiar a mensagem com o link curto\n            navigator.clipboard.writeText(mensagemParaCopiar).then(() => {\n                setTextoBotao('✅ Link Copiado!');\n                setTimeout(() => setTextoBotao('Gerar Link Curto'), 2500);\n            });\n        } catch (error) {\n            console.error(\"Erro ao salvar o treino:\", error);\n            alert(\"Ocorreu um erro ao gerar o link. Este recurso só funciona com o site publicado.\");\n            setTextoBotao('Gerar Link Curto');\n        }\n    };\n\n    const conteudoTreino = (\n        <div ref={treinoRef} className=\"container-treino\">\n            <header className=\"cabecalho-treino-novo\">\n                <div className=\"cabecalho-texto\">\n                    <h2>Rodolfo Ferraz</h2>\n                    <p className=\"subtitulo-personal\">Personal Trainer</p>\n                    <p className=\"nome-aluno\"><strong>Aluno(a):</strong> {alunoNome || '____________________'}</p>\n                </div>\n                <div className=\"cabecalho-logo\">\n                    <img src={`/${LOGO_FILENAME}`} alt=\"Logo Personal Trainer\" className=\"logo-img\" />\n                </div>\n            </header>\n            <main className=\"grid-exercicios\">\n                {(lista || []).map((ex, index) => (\n                    <div key={index} className=\"card-exercicio\">\n                        <span className=\"numero-exercicio\">{index + 1}</span>\n                        <img src={`/gifs/${ex.gif}`} alt={ex.nome} className=\"gif-exercicio\" />\n                        <p className=\"nome-exercicio\"><strong>{ex.nome}</strong></p>\n                        <p className=\"serie-exercicio\">3x10 rep</p>\n                    </div>\n                ))}\n            </main>\n            <footer className=\"rodape-treino-novo\">\n                <h3>Observações:</h3>\n                <p className=\"observacoes-texto\">{observacoes || 'Nenhuma.'}</p>\n            </footer>\n        </div>\n    );\n\n    // Se for modo de visualização, mostra apenas o treino\n    if (isModoVisualizacao) {\n        return conteudoTreino;\n    }\n\n    // Se for modo de criação, mostra o modal completo\n    return (\n        <div>\n            <div className=\"modal-header\">\n                <h2>Pré-visualização e Compartilhamento</h2>\n                <button onClick={onClose} className=\"close-button\">&times;</button>\n            </div>\n            <div className=\"modal-actions\">\n                <button onClick={handleSaveAndLink} className=\"export-button\">\n                    {textoBotao}\n                </button>\n            </div>\n            {conteudoTreino}\n        </div>\n    );\n};\n\nexport default TreinoVisual;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}